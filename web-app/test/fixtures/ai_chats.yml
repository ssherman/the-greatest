# == Schema Information
#
# Table name: ai_chats
#
#  id              :bigint           not null, primary key
#  chat_type       :integer          default("general"), not null
#  json_mode       :boolean          default(FALSE), not null
#  messages        :jsonb
#  model           :string           not null
#  parameters      :jsonb
#  parent_type     :string
#  provider        :integer          default("openai"), not null
#  raw_responses   :jsonb
#  response_schema :jsonb
#  temperature     :decimal(3, 2)    default(0.2), not null
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
#  parent_id       :bigint
#  user_id         :bigint
#
# Indexes
#
#  index_ai_chats_on_parent   (parent_type,parent_id)
#  index_ai_chats_on_user_id  (user_id)
#
# Foreign Keys
#
#  fk_rails_...  (user_id => users.id)
#
general_chat:
  chat_type: general
  model: "gpt-4"
  provider: openai
  temperature: 0.2
  json_mode: false
  messages: [{ role: "user", content: "Hello", timestamp: "2024-01-01T10:00:00Z" }]
  user: regular_user

ranking_chat:
  chat_type: ranking
  model: "claude-3"
  provider: anthropic
  temperature: 0.1
  json_mode: true
  messages: [{ role: "system", content: "Rank these items", timestamp: "2024-01-01T11:00:00Z" }]
  parent: books_list (Books::List)

recommendation_chat:
  chat_type: recommendation
  model: "gemini-pro"
  provider: gemini
  temperature: 0.5
  json_mode: false
  messages: [{ role: "user", content: "Recommend me a book", timestamp: "2024-01-01T12:00:00Z" }]
  user: admin_user

# Music-related AI chats for admin testing
music_artist_chat:
  chat_type: analysis
  model: "gpt-4"
  provider: openai
  temperature: 0.3
  json_mode: true
  messages: [{ role: "system", content: "Analyze this artist", timestamp: "2024-01-02T10:00:00Z" }]
  parent: david_bowie (Music::Artist)

music_album_chat:
  chat_type: ranking
  model: "claude-3"
  provider: anthropic
  temperature: 0.2
  json_mode: true
  messages: [{ role: "system", content: "Rank album tracks", timestamp: "2024-01-02T11:00:00Z" }]
  parent: dark_side_of_the_moon (Music::Album)

# AiChats with List STI subclass parents (for testing STI-aware scoping)
# NOTE: Rails stores base class 'List' in parent_type for STI models.
# We manually set parent_type and parent_id to match this behavior,
# since the fixture syntax `parent: x (ClassName)` would store the STI class name.
music_albums_list_chat:
  chat_type: ranking
  model: "gpt-4"
  provider: openai
  temperature: 0.2
  json_mode: true
  messages: [{ role: "system", content: "Parse this albums list", timestamp: "2024-01-03T10:00:00Z" }]
  parent_type: "List"
  parent_id: <%= ActiveRecord::FixtureSet.identify(:music_albums_list) %>

music_songs_list_chat:
  chat_type: ranking
  model: "claude-3"
  provider: anthropic
  temperature: 0.2
  json_mode: true
  messages: [{ role: "system", content: "Parse this songs list", timestamp: "2024-01-03T11:00:00Z" }]
  parent_type: "List"
  parent_id: <%= ActiveRecord::FixtureSet.identify(:music_songs_list) %>

# Non-music list chats (for exclusion testing)
games_list_chat:
  chat_type: ranking
  model: "gpt-4"
  provider: openai
  temperature: 0.2
  json_mode: true
  messages: [{ role: "system", content: "Parse this games list", timestamp: "2024-01-03T12:00:00Z" }]
  parent_type: "List"
  parent_id: <%= ActiveRecord::FixtureSet.identify(:games_list) %>

# AiChat with no parent (should be included in music admin)
no_parent_chat:
  chat_type: general
  model: "gpt-4"
  provider: openai
  temperature: 0.7
  json_mode: false
  messages: [{ role: "user", content: "General question", timestamp: "2024-01-03T13:00:00Z" }]
  user: regular_user
