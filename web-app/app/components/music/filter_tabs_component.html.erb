<div class="mb-6">
  <div role="tablist" class="tabs tabs-boxed bg-base-200 p-1 flex flex-wrap gap-1">
    <%= link_to "All Time", base_path, role: "tab", class: tab_class(active: all_time_active?) %>
    <% decades.each do |decade| %>
      <%= link_to decade, decade_path(decade), role: "tab", class: tab_class(active: decade_active?(decade)) %>
    <% end %>
    <button type="button" role="tab" class="<%= tab_class(active: custom_active?) %>" onclick="<%= modal_id %>.showModal()">
      Custom
    </button>
  </div>
</div>

<!-- Custom Year Range Modal -->
<dialog id="<%= modal_id %>" class="modal">
  <div class="modal-box" data-controller="year-range-modal" data-year-range-modal-base-path-value="<%= base_path %>">
    <h3 class="font-bold text-lg mb-4">Custom Year Range</h3>

    <div class="grid grid-cols-2 gap-4">
      <div class="form-control">
        <label class="label">
          <span class="label-text">From Year <span class="text-base-content/50">(optional)</span></span>
        </label>
        <input type="number"
               placeholder="1980"
               min="1900"
               max="2099"
               class="input input-bordered w-full"
               data-year-range-modal-target="fromYear"
               data-action="input->year-range-modal#validate">
      </div>

      <div class="form-control">
        <label class="label">
          <span class="label-text">To Year <span class="text-base-content/50">(optional)</span></span>
        </label>
        <input type="number"
               placeholder="2000"
               min="1900"
               max="2099"
               class="input input-bordered w-full"
               data-year-range-modal-target="toYear"
               data-action="input->year-range-modal#validate">
      </div>
    </div>

    <p class="text-error text-sm mt-2 hidden" data-year-range-modal-target="error"></p>

    <p class="text-base-content/70 text-sm mt-3">
      Leave "From" empty to show all <%= item_type %> through a year.<br>
      Leave "To" empty to show all <%= item_type %> since a year.
    </p>

    <div class="modal-action">
      <form method="dialog">
        <button class="btn">Cancel</button>
      </form>
      <button type="button"
              class="btn btn-primary"
              disabled
              data-year-range-modal-target="applyButton"
              data-action="click->year-range-modal#apply">
        Apply
      </button>
    </div>
  </div>
  <form method="dialog" class="modal-backdrop">
    <button>close</button>
  </form>
</dialog>
