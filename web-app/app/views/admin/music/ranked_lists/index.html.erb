<%= turbo_frame_tag "ranked_lists_list" do %>
  <% if @ranked_lists.any? %>
    <div class="overflow-x-auto">
      <table class="table table-sm">
        <thead>
          <tr>
            <th>List Name</th>
            <th>Weight</th>
            <th>Calculated Weight Details</th>
          </tr>
        </thead>
        <tbody>
          <% @ranked_lists.each do |ranked_list| %>
            <tr>
              <td>
                <div>
                  <div class="font-semibold">
                    <%= ranked_list.list.name %>
                  </div>
                  <% if ranked_list.list.submitted_by.present? %>
                    <div class="text-xs text-base-content/70">
                      Submitted by <%= ranked_list.list.submitted_by.email %>
                    </div>
                  <% end %>
                </div>
              </td>
              <td>
                <span class="badge badge-primary"><%= number_with_precision(ranked_list.weight, precision: 2) %></span>
              </td>
              <td>
                <% if ranked_list.calculated_weight_details.present? %>
                  <details class="dropdown">
                    <summary class="btn btn-xs btn-ghost cursor-pointer">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      View Details
                    </summary>
                    <div class="dropdown-content z-[1] card card-compact w-96 p-2 shadow bg-base-200 rounded-box mt-1">
                      <div class="card-body">
                        <pre class="text-xs whitespace-pre-wrap bg-base-300 p-2 rounded overflow-auto max-h-96"><%= JSON.pretty_generate(ranked_list.calculated_weight_details) %></pre>
                      </div>
                    </div>
                  </details>
                <% else %>
                  <span class="text-base-content/30 text-xs">No details</span>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <% if @pagy && @pagy.pages > 1 %>
      <div class="flex justify-center py-4 border-t border-base-300">
        <%== pagy_nav(@pagy, link_extra: 'data-turbo-frame="ranked_lists_list"') %>
      </div>
    <% end %>
  <% else %>
    <div class="py-8 text-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-base-content/20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
      </svg>
      <p class="mt-4 text-sm text-base-content/70">
        No lists included in this configuration.
      </p>
    </div>
  <% end %>
<% end %>
